package entidad;

import java.awt.Image;

import pantallaInicio.Controlador;

public class GestorJugador {
    private Jugador1 jugador1;
    private Jugador2 jugador2;
    private int areaEfectividad = 160;

    public GestorJugador(Jugador1 jugador1, Jugador2 jugador2) {
        this.jugador1 = jugador1;
        this.jugador2 = jugador2;
    }

    public void actualizarJuego() {
        if (esEfectivo()) {
            if (jugador1.getMovimientoJugador().atacar) {
                jugador1.atacar(jugador2);
                jugador1.getMovimientoJugador().atacar = false;
            }
            if (jugador2.getMovimientoJugador().atacar) {
                jugador2.atacar(jugador1);
                jugador2.getMovimientoJugador().atacar = false;
            }
        }
        // Actualiza las defensas
        jugador1.setDefendiendo(jugador1.getMovimientoJugador().defensa);
        jugador2.setDefendiendo(jugador2.getMovimientoJugador().defensa);

        // Verifica si la partida termin√≥
        if (jugador1.getSaludActual() <= 0 || jugador2.getSaludActual() <= 0) {
            Controlador.getInstance().cambiarPantalla("Ganador");
        }
    }

    public boolean esEfectivo() {
        int distX = Math.abs(jugador1.getX() - jugador2.getX());
        int distY = Math.abs(jugador1.getY() - jugador2.getY());
        return distX <= areaEfectividad && distY == 0;
    }

    public boolean partidaAcabada() {
        return jugador1.getSaludActual() == 0 || jugador2.getSaludActual() == 0;
    }
}

